cc_library(
    name = 'ops',
    srcs = [
        'op.cpp',
        'mat_mul.cpp',
        'rms_norm.cpp',
        'feed_forward.cpp',
        'rope.cpp',
	    'elementwise.cpp',
        'softmax.cpp',
        'concat.cpp',
        'slice.cpp',
		'embedding.cpp',
	    'multiheadattention.cpp',
	    'cast.cpp',
        'update_kv_cache.cpp',
        'transpose.cpp',
    ],
    hdrs = [
        'op.h',
        'mat_mul.h',
        'rms_norm.h',
        'feed_forward.h',
        'rope.h',
	    'elementwise.h',
	    'reduce.h',
        'softmax.h',
        'concat.h',
        'slice.h',
		'embedding.h',
	    'multiheadattention.h',
        'argop.h',
        'cast.h',
        'update_kv_cache.h',
        'transpose.h',
    ],
    deps = ["//src/core:core", "//src/shaders:vkllama_shaders"],
    copts = select({
            '//:debug_build': ['-std=c++17', '-D__VKLLAMA_DEBUG__'],
            '//conditions:default': ['-std=c++17']
    }),
    visibility = ['//visibility:public']
)
